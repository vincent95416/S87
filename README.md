é€™æ˜¯ä¸€å€‹åŸºæ–¼ Python çš„å…¨æ–¹ä½è‡ªå‹•åŒ–æ¸¬è©¦æ¡†æ¶ï¼Œæ—¨åœ¨ç‚º Web æ‡‰ç”¨ç¨‹å¼æä¾›é«˜æ•ˆã€å¯æ“´å±•çš„ç«¯åˆ°ç«¯ (E2E) UI æ¸¬è©¦å’Œ API æ¸¬è©¦è§£æ±ºæ–¹æ¡ˆã€‚

## âœ¨ åŠŸèƒ½ç‰¹è‰²

- **æ•´åˆæ¸¬è©¦æ¡†æ¶**: ä½¿ç”¨ `pytest` ä½œç‚ºæ ¸å¿ƒæ¸¬è©¦åŸ·è¡Œå™¨ï¼Œæä¾›éˆæ´»çš„æ¸¬è©¦çµ„ç¹”å’Œå¼·å¤§çš„æ–·è¨€èƒ½åŠ›ã€‚
- **ç¾ä»£åŒ– UI æ¸¬è©¦**: æ¡ç”¨ `Playwright` é€²è¡Œç€è¦½å™¨è‡ªå‹•åŒ–ï¼Œæ”¯æ´æ‰€æœ‰ç¾ä»£ç€è¦½å™¨ï¼Œä¸¦ä»¥é é¢ç‰©ä»¶æ¨¡å‹ (Page Object Model) è¨­è¨ˆæ¨¡å¼ä¾†æé«˜ç¨‹å¼ç¢¼çš„å¯ç¶­è­·æ€§ã€‚
- **åˆ†å±¤ API æ¸¬è©¦**: é€é `requests` å‡½å¼åº«ï¼Œä¸¦å°‡ API è«‹æ±‚å°è£åœ¨ç¨ç«‹çš„æœå‹™å±¤ä¸­ï¼Œä½¿ API æ¸¬è©¦æ›´æ¸…æ™°ã€æ›´æ˜“æ–¼ç®¡ç†ã€‚
- **å‹•æ…‹ç’°å¢ƒè¨­å®š**: æ”¯æ´å¤šç’°å¢ƒã€å¤šç«™é»çš„æ¸¬è©¦è¨­å®šï¼Œå¯é€éå‘½ä»¤åˆ—åƒæ•¸ (`--env`, `--site`) è¼•é¬†åˆ‡æ›ï¼Œç„¡éœ€ä¿®æ”¹ç¨‹å¼ç¢¼ã€‚
- **ç²¾ç¾çš„æ¸¬è©¦å ±å‘Š**: æ•´åˆ `Allure Report`ï¼Œç”¢ç”Ÿå…§å®¹è±å¯Œã€äº’å‹•æ€§å¼·çš„ HTML æ¸¬è©¦å ±å‘Šï¼Œæ–¹ä¾¿è¿½è¹¤æ¸¬è©¦çµæœèˆ‡åˆ†æå¤±æ•—åŸå› ã€‚
- **å®¹å™¨åŒ–æ”¯æ´**: æä¾› `Dockerfile`ï¼Œè®“æ¸¬è©¦ç’°å¢ƒçš„å»ºç½®èˆ‡éƒ¨ç½²æ¨™æº–åŒ–ã€ç°¡å–®åŒ–ã€‚

## ğŸ› ï¸ æŠ€è¡“æ£§

- **æ ¸å¿ƒæ¡†æ¶**: pytest
- **UI è‡ªå‹•åŒ–**: playwright-pytest
- **API è«‹æ±‚**: requests
- **æ¸¬è©¦å ±å‘Š**: allure-pytest
- **è¨­å®šç®¡ç†**: configparser

## ğŸ“‚ å°ˆæ¡ˆçµæ§‹

```
.
â”œâ”€â”€ env/                  # ç’°å¢ƒè¨­å®šæª”ç›®éŒ„
â”œâ”€â”€ src/                  # æ¸¬è©¦æ¡†æ¶æºç¢¼
â”‚   â”œâ”€â”€ apicheck/         # API æ¸¬è©¦ç›¸é—œçš„å®¢æˆ¶ç«¯èˆ‡ç®¡ç†å™¨
â”‚   â”œâ”€â”€ pages/            # UI æ¸¬è©¦çš„é é¢ç‰©ä»¶ (Page Objects)
â”‚   â””â”€â”€ services/         # API æ¸¬è©¦çš„æœå‹™å±¤å°è£
â”œâ”€â”€ tests/                # æ¸¬è©¦æ¡ˆä¾‹ç›®éŒ„
â”‚   â”œâ”€â”€ apicheck/         # API æ¸¬è©¦æ¡ˆä¾‹
â”‚   â””â”€â”€ new20/            # new20 ç«™é»çš„ UI æ¸¬è©¦æ¡ˆä¾‹
â”œâ”€â”€ conftest.py           # Pytest çš„ä¸»è¦è¨­å®šæª” (å®šç¾©å‘½ä»¤åˆ—é¸é …)
â”œâ”€â”€ tests/conftest.py     # æ ¸å¿ƒ fixture è¨­å®š (ç’°å¢ƒè¼‰å…¥ã€ç€è¦½å™¨å•Ÿå‹•ã€è‡ªå‹•ç™»å…¥)
â”œâ”€â”€ requirements.txt      # Python ä¾è³´å¥—ä»¶åˆ—è¡¨
â”œâ”€â”€ pytest.ini            # Pytest è¨­å®šæª” (markers, default options)
â””â”€â”€ Dockerfile            # Docker å®¹å™¨è¨­å®šæª”
```

## ğŸš€ å¿«é€Ÿé–‹å§‹

### ç’°å¢ƒæº–å‚™

- Python 3.8+
- Git

### å®‰è£æ­¥é©Ÿ

1.  **è¤‡è£½å°ˆæ¡ˆ**
    ```bash
    git clone <your-repository-url>
    cd <project-directory>
    ```

2.  **å»ºç«‹ä¸¦å•Ÿç”¨è™›æ“¬ç’°å¢ƒ** (å»ºè­°)
    ```bash
    # Windows
    python -m venv .venv
    .venv\Scripts\activate

    # macOS / Linux
    python3 -m venv .venv
    source .venv/bin/activate
    ```

3.  **å®‰è£ä¾è³´å¥—ä»¶**
    ```bash
    pip install -r requirements.txt
    ```

4.  **å®‰è£ Playwright ç€è¦½å™¨é©…å‹•**
    ```bash
    playwright install
    ```

## âš™ï¸ ç’°å¢ƒè¨­å®š

æœ¬æ¡†æ¶çš„è¨­å®šæª”ä½æ–¼ `env/` ç›®éŒ„ä¸‹ã€‚æ‚¨å¯ä»¥é€é `pytest` å‘½ä»¤åˆ—çš„ `--env` å’Œ `--site` åƒæ•¸ä¾†æŒ‡å®šè¦è¼‰å…¥çš„è¨­å®šã€‚

- `--env`: æŒ‡å®šç’°å¢ƒï¼Œä¾‹å¦‚ `dev`, `uat`ã€‚
- `--site`: æŒ‡å®šç«™é»ï¼Œä¾‹å¦‚ `new20`, `spg`ã€‚

## â–¶ï¸ åŸ·è¡Œæ¸¬è©¦

è«‹åœ¨å°ˆæ¡ˆæ ¹ç›®éŒ„ä¸‹åŸ·è¡Œä»¥ä¸‹å‘½ä»¤ï¼š

- **åŸ·è¡Œæ‰€æœ‰æ¸¬è©¦**
  ```bash
  pytest
  ```

- **åƒ…åŸ·è¡Œ UI æ¸¬è©¦** (æ¨™è¨˜ç‚º `e2e`)
  ```bash
  pytest -m e2e
  ```

- **åƒ…åŸ·è¡Œ API æ¸¬è©¦** (æ¨™è¨˜ç‚º `apicheck`)
  ```bash
  pytest -m apicheck
  ```

- **æŒ‡å®šç’°å¢ƒå’Œç«™é»åŸ·è¡Œ**
  ```bash
  # åŸ·è¡Œ UAT ç’°å¢ƒçš„ spg ç«™é»æ¸¬è©¦
  pytest --env=uat --site=spg
  ```

- **æ­é… Allure å ±å‘ŠåŸ·è¡Œ**
  ```bash
  pytest --alluredir=allure-results
  ```

## ğŸ“Š ç”¢ç”Ÿå ±å‘Š

æ¸¬è©¦åŸ·è¡Œå®Œç•¢å¾Œï¼Œè‹¥æœ‰ä½¿ç”¨ `--alluredir` åƒæ•¸ï¼Œå¯ä½¿ç”¨ Allure commandline ä¾†å•Ÿå‹•ä¸€å€‹ Web æœå‹™ä»¥æŸ¥çœ‹å ±å‘Šã€‚

1.  **å®‰è£ Allure** (è‹¥å°šæœªå®‰è£)
    è«‹åƒè€ƒ [Allure å®˜æ–¹æ–‡ä»¶](https://allurereport.org/docs/gettingstarted-installation/) é€²è¡Œå®‰è£ã€‚

2.  **å•Ÿå‹•å ±å‘Šæœå‹™**
    ```bash
    allure serve allure-results
    ```

## ğŸ³ Docker éƒ¨ç½²

æ‚¨ä¹Ÿå¯ä»¥ä½¿ç”¨ Docker ä¾†åŸ·è¡Œæ¸¬è©¦ï¼Œä»¥ç¢ºä¿ç’°å¢ƒçš„ä¸€è‡´æ€§ã€‚

1.  **å»ºç½® Docker Image**
    ```bash
    docker build -t my-test-framework .
    ```

2.  **åŸ·è¡Œæ¸¬è©¦**
    ```bash
    # åŸ·è¡Œé è¨­æ¸¬è©¦
    docker run --rm my-test-framework

    # å‚³é pytest åƒæ•¸ (ä¾‹å¦‚ï¼Œåƒ…åŸ·è¡Œ API æ¸¬è©¦)
    docker run --rm my-test-framework pytest -m apicheck
    ```
    